<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Autorzy - BlogApp</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<nav class="navbar">
    <a href="index.html" class="logo">BlogApp ‚ú®</a>
    <div class="nav-links">
        <a href="index.html">Posty</a>
        <a href="users.html" style="color: var(--primary);">Autorzy</a>
        <a href="login.html" class="btn-auth">Zaloguj</a>
    </div>
</nav>

<div class="container">
    <div class="page-header">
        <h1>Nasi Tw√≥rcy</h1>
        <p style="color: rgba(255,255,255,0.8);">Poznaj ludzi, kt√≥rzy tworzƒÖ te tre≈õci</p>
    </div>

    <div id="usersGrid" class="posts-grid"></div>
</div>

<script>
    async function loadUsers() {
        const grid = document.getElementById('usersGrid');
        grid.innerHTML = '<p style="color: white; text-align: center;">≈Åadowanie autor√≥w...</p>';

        try {
            const res = await fetch('http://localhost:3000/api/users');
            if (!res.ok) throw new Error('B≈ÇƒÖd API');
            const users = await res.json();

            grid.innerHTML = '';

            if (users.length === 0) {
                grid.innerHTML = '<p style="color: white;">Brak u≈ºytkownik√≥w.</p>';
                return;
            }

            users.forEach(user => {
                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => window.location.href = `user.html?id=${user.id}`;

                card.innerHTML = `
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 10px;">üë§</div>
                            <div class="card-title">${user.username}</div>
                            <p style="color: var(--text-light);">Do≈ÇƒÖczy≈Ç: ${new Date(user.created_at).toLocaleDateString()}</p>
                        </div>
                        <div class="card-meta" style="justify-content: center; margin-top: 20px;">
                            <span class="author-badge">üìù ${user.post_count || 0} Post√≥w</span>
                        </div>
                    `;
                grid.appendChild(card);
            });
        } catch (error) {
            grid.innerHTML = '<p style="color: #feb2b2;">Nie uda≈Ço siƒô pobraƒá listy autor√≥w.</p>';
            console.error(error);
        }
    }
    loadUsers();
</script>
</body>
</html>